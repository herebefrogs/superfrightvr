<html>
  <head>
    <title>JS13K 2024: SUP3RFR1GHT VR</title>
    <script src="https://js13kgames.com/webxr-src/2024/aframe.js"></script>
    <script src="game.js"></script>
  </head>
  <body>
    <a-scene>
      <a-portal id="retry" position="0 1 -0.65" text-value="RETRY" text-width="1.4" visible="false"></a-portal>
      <a-sky color="#ddd"></a-sky>
      <a-sphere id="world" color="blue" radius="1000" material="shader: flat; wireframe: true; side: back"></a-sphere>

      <!-- sorta player head & body -->
      <a-camera motion-tracker health="group: friend" obb-collider="size: 0.2">
        <!-- sorta HUD -->
        <!-- <a-text
          value="0.00s"
          align="center"
          color="black"
          font="monoid"
          position="0 0.65 -1.5"
          game-time
          ></a-text> -->
      </a-camera>

      <a-entity id="left"
                hand-controls="hand: left; handModelStyle: toon"
                position="-0.5 1 0"
                health="group: friend"
                obb-collider="size: 0.1"
                motion-tracker
                gesture-tracker
      >
        <a-text value="1" color="black" font="monoid" align="center"
          width="1" position="-0.028 0.05 0" rotation="185 90 0"></a-text>
      </a-entity>
      <a-entity id="right"
          hand-controls="hand: right; handModelStyle: toon"
          position="0.5 1 0"
          health="group: friend"
          obb-collider="size: 0.1"
          motion-tracker
          gesture-tracker
      >
        <a-text value="3" color="black" font="monoid" align="center"
        width="1" position="0.028 0.05 0" rotation="185 -90 0"></a-text>
      </a-entity>

    </a-scene>

    <script id="level_templates" type="text/html">
      <a-level id="title">
        <a-text
          value="SUP3RFR1GHT VR"
          align="center"
          color="#ef2d5e"
          font="monoid"
          width="20"
          position="0 2.5 -5"
        ></a-text>

        <a-text
          value="A GAME BY JEROME LECOMTE FOR JS13K 2024" position="0 1.8 -5"
          align="center" font="monoid" width="5">
        </a-text>
        <a-text
          value="press GRIP to GRAB objects\npress TRIGGER to shoot or punch" position="0 0.5 -5"
          align="center" color="black" font="monoid" width="5" height="2">
        </a-text>


        <a-portal to="#level_1" text-value="GRAB" text-width="1.75"
          position="0 1 -0.65"></a-portal>
      </a-level>

      <a-level id="level_1" game-time-tracked>
        <!-- grabbable stuff -->
        <a-gun position="0 1.2 -0.5" gravity health="group: friend"></a-gun>
        <a-portal position="0 1 -0.65" to="#level_2" text-value="GRAB" text-width="1.75" visible="false"></a-portal>

        <!-- enemy -->
        <a-tetrahedron
          puppet
          radius="1" color="#ef2d5e"
          position="0 1.25 -3" rotation="0 -45 0" spin-motion="direction: 1 1 1; speed: 2"
          health="group: foe"
          dynamic-collider="size: 1"
        >
        </a-tetrahedron>

        <!-- room -->
        <a-cylinder radius="4" height="30" segments-radial="4" segments-height="1" theta-start="45"
          geometry="openEnded: true" material="color: #f7fafd; side: back; flatShading: true"
          position="0 2 0" rotation="-90 0 0"
        >
          <a-text value="TIME MOVES\nWHEN YOU MOVE" align="center" font="monoid" width="12" position="0 5.5 1" rotation="90 0 0"></a-text>
        </a-cylinder>
      </a-level>

      <a-level id="level_2" game-time-tracked>
        <!-- grabbable stuff -->
        <a-portal position="0 1 -0.65" to="#level_3" text-value="GRAB" text-width="1.75" visible="false"></a-portal>

        <!-- enemy -->
        <a-box
          puppet
          color="#ef2d5e"
          position="0 1 -2" spin-motion="direction: 1 0 0.5; speed: 2" sinlinear-motion="direction: 0 0 1"
          health="group: foe"
          dynamic-collider
        >
        </a-box>

        <!-- room -->
        <a-cylinder
          radius="4" height="30" segments-radial="5" segments-height="1"
          geometry="openEnded: true" material="color: #f7fafd; side: back; flatShading: true"
          position="0 2 0" rotation="-90 0 0"
        >
          <a-text value="PUNCH THRU" align="center" font="monoid" width="15" position="0 5.5 1" rotation="90 0 0"></a-text>
        </a-cylinder>
      </a-level>

      <a-level id="level_3" game-time-tracked>
        <!-- grabbable stuff -->
        <a-portal position="0 1 -0.65" to="#level_4" text-value="GRAB" text-width="1.75" visible="false"></a-portal>

        <!-- enemy -->
        <a-octahedron
          position="0 0.9 -5"
          radius="1" scale="0.5 1 0.5" material="color: #ef2d5e; flatShading: true"
          puppet
          health="group: foe"
          dynamic-collider
          linear-motion="direction: 0 0 1; speed: 0.8" spin-motion="direction: 0 1 0; speed: 1"
          ttl="16"
        >
        </a-octahedron>
        <a-entity position="-0.4 1.24 -4.5" rotation="90 0 0" linear-motion="direction: 0.15 0 1; speed: 2.5">
          <a-pyramid
            scale="0.25 0.6 0.25" rotation="0 45 0" color="#ef2d5e"
            spin-motion="direction: 0 -1 0; speed: 2"
            puppet dynamic-collider health="group: foe" ttl="5"
          ></a-pyramid>
        </a-entity>
        <a-entity position="0.4 1.24 -4.5" rotation="90 0 0" linear-motion="direction: -0.15 0 1; speed: 1.5">
          <a-pyramid
           scale="0.25 0.6 0.25" rotation="0 45 0" color="#ef2d5e"
           spin-motion="direction: 0 1 0; speed: 2"
           puppet dynamic-collider health="group: foe" ttl="5"
          ></a-pyramid>
        </a-entity>

        <!-- room -->
        <a-cylinder
          radius="4" height="30" segments-radial="6" segments-height="1" theta-start="30"
          geometry="openEnded: true" material="color: #f7fafd; side: back; flatShading: true"
          position="0 2 0" rotation="-90 0 0"
          >
          <a-text value="MOVE YOUR BODY" align="center" font="monoid" width="15" position="0 5.5 1" rotation="90 0 0"></a-text>
        </a-cylinder>
      </a-level>

      <a-level id="level_4" game-time-tracked>
        <!-- grabbable stuff -->
        <a-gun position="-0.35 1.2 -0.4" gravity health="group: friend"></a-gun>
        <a-gun position="0.35 1.2 -0.4" gravity health="group: friend"></a-gun>
        <a-portal position="0 1 -0.65" to="#last_level" text-value="GRAB" text-width="1.75" visible="false"></a-portal>

        <!-- enemy -->
        <a-entity position="0 2 -3" spin-motion="direction: 0 -0.5 0" sinlinear-motion="direction: 0 -1 0">
          <a-dodecahedron radius="0.5" material="color: #ef2d5e; flatShading: true"
            spin-motion="direction: 1 -1 0; speed: 2"
            puppet sniper="firstShotDelay: 1.5" dynamic-collider health="group: foe" >
          </a-dodecahedron>

          <a-entity rotation="0 0 0" >
            <a-pyramid
              width="0.25" depth="0.25" position="0.75 0 0" sinlinear-motion="direction: 2.5 0 0" rotation="180 135 45" color="#ef2d5e"
              puppet dynamic-collider health="group: foe">
            </a-pyramid>
          </a-entity>
          <a-entity rotation="0 45 0">
            <a-pyramid
              width="0.25" depth="0.25" position="0.75 0 0" sinlinear-motion="direction: 2.5 0 0" rotation="180 135 45" color="#ef2d5e"
              puppet dynamic-collider health="group: foe">
            </a-pyramid>
          </a-entity>
          <a-entity rotation="0 90 0">
            <a-pyramid
              width="0.25" depth="0.25" position="0.75 0 0" sinlinear-motion="direction: 2.5 0 0" rotation="180 135 45" color="#ef2d5e"
              puppet dynamic-collider health="group: foe">
            </a-pyramid>
          </a-entity>
          <a-entity rotation="0 135 0">
            <a-pyramid
              width="0.25" depth="0.25" position="0.75 0 0" sinlinear-motion="direction: 2.5 0 0" rotation="180 135 45" color="#ef2d5e"
              puppet dynamic-collider health="group: foe">
            </a-pyramid>
          </a-entity>
          <a-entity rotation="0 180 0">
            <a-pyramid
              width="0.25" depth="0.25" position="0.75 0 0" sinlinear-motion="direction: 2.5 0 0" rotation="180 135 45" color="#ef2d5e"
              puppet dynamic-collider health="group: foe">
            </a-pyramid>
          </a-entity>
          <a-entity rotation="0 -45 0">
            <a-pyramid
              width="0.25" depth="0.25" position="0.75 0 0" sinlinear-motion="direction: 2.5 0 0" rotation="180 135 45" color="#ef2d5e"
              puppet dynamic-collider health="group: foe">
            </a-pyramid>
          </a-entity>
          <a-entity rotation="0 -90 0">
            <a-pyramid
              width="0.25" depth="0.25" position="0.75 0 0" sinlinear-motion="direction: 2.5 0 0" rotation="180 135 45" color="#ef2d5e"
              puppet dynamic-collider health="group: foe">
            </a-pyramid>
          </a-entity>
          <a-entity rotation="0 -135 0">
            <a-pyramid
              width="0.25" depth="0.25" position="0.75 0 0" sinlinear-motion="direction: 2.5 0 0" rotation="180 135 45" color="#ef2d5e"
              puppet dynamic-collider health="group: foe">
            </a-pyramid>
          </a-entity>
        </a-entity>

        <!-- room -->
        <a-box
          width="12" depth="12" height="5"
          color="#f7fafd" material="side: back"
          position="0 2.5 -4"
        >
          <a-box width="1" depth="1" height="5" color="#f7fafd"  position="3 0 3"></a-box>
          <a-box width="0.5" depth="6" height="0.5" color="#f7fafd" position="-3 1.4 0"></a-box>
          <a-box width="1" depth="1" height="5" color="#f7fafd"  position="3 0 -3"></a-box>
          <a-box width="1" depth="1" height="5" color="#f7fafd"  position="-3 0 3"></a-box>
          <a-box width="0.5" depth="6" height="0.5" color="#f7fafd" position="3 1.4 0"></a-box>
          <a-box width="1" depth="1" height="5" color="#f7fafd"  position="-3 0 -3"></a-box>
          <a-text value="JAIL SUBJECT 13\nKNOWS" align="center" font="monoid" width="15" position="0 1 -5"></a-text>
        </a-box>
        <a-plane height="12" width="12" position="0 0.01 -4" rotation="-90 0 0"></a-plane>
      </a-level>

      <a-level id="last_level" game-time-tracked>
        <!-- grabbable stuff -->
        <a-gun position="0 1.5 -0.75" gravity health="group: friend"></a-gun>
        <a-portal position="0 1 -0.65" to="#end" text-value="GRAB" text-width="1.75" visible="false"></a-portal>

        <!-- enemy -->
        <a-entity position="0 1.25 -5"
          spin-motion="direction: 0 0 1; speed: 4"
          linear-motion="direction: 0 0 1; speed: 0.33"
          sinlinear-motion="direction: -1 0 0">
          <a-torus-knot
            p="5" q="11" radius="0.25" radius-tubular="0.05"
            material="color: #ef2d5e; flatShading: true"
            puppet
            sniper="firstShotDelay: 0.25; frequency: 0.75"
            health="group: foe"
            dynamic-collider>
            <a-pyramid width="0.1" depth="0.1" height="0.5" position="0.45 0 0.45" rotation="90 35 0" color="#ef2d5e"></a-pyramid>
            <a-entity rotation="0 0 60"><a-pyramid width="0.1" depth="0.1" height="0.5" position="0.45 0 0.45" rotation="90 35" color="#ef2d5e"></a-pyramid></a-entity>
            <a-entity rotation="0 0 120"><a-pyramid width="0.1" depth="0.1" height="0.5" position="0.45 0 0.45" rotation="90 35" color="#ef2d5e"></a-pyramid></a-entity>
            <a-entity rotation="0 0 180"><a-pyramid width="0.1" depth="0.1" height="0.5" position="0.45 0 0.45" rotation="90 35" color="#ef2d5e"></a-pyramid></a-entity>
            <a-entity rotation="0 0 240"><a-pyramid width="0.1" depth="0.1" height="0.5" position="0.45 0 0.45" rotation="90 35" color="#ef2d5e"></a-pyramid></a-entity>
            <a-entity rotation="0 0 300"><a-pyramid width="0.1" depth="0.1" height="0.5" position="0.45 0 0.45" rotation="90 35" color="#ef2d5e"></a-pyramid></a-entity>
          </a-torus-knot>
        </a-entity>

        <a-entity position="-6 1.25 -4"
          spin-motion="direction: 0 0 1; speed: 4"
          linear-motion="direction: 1.25 0 1; speed: 0.33"
          sinlinear-motion="direction: -1 0 0"
          rotation="0 55 0">
          <a-torus-knot
            p="5" q="11" radius="0.25" radius-tubular="0.05"
            material="color: #ef2d5e; flatShading: true"
            puppet
            sniper="firstShotDelay: 0.75; frequency: 1.5"
            health="group: foe"
            dynamic-collider>
            <a-pyramid width="0.1" depth="0.1" height="0.5" position="0.45 0 0.45" rotation="90 35 0" color="#ef2d5e"></a-pyramid>
            <a-entity rotation="0 0 60"><a-pyramid width="0.1" depth="0.1" height="0.5" position="0.45 0 0.45" rotation="90 35" color="#ef2d5e"></a-pyramid></a-entity>
            <a-entity rotation="0 0 120"><a-pyramid width="0.1" depth="0.1" height="0.5" position="0.45 0 0.45" rotation="90 35" color="#ef2d5e"></a-pyramid></a-entity>
            <a-entity rotation="0 0 180"><a-pyramid width="0.1" depth="0.1" height="0.5" position="0.45 0 0.45" rotation="90 35" color="#ef2d5e"></a-pyramid></a-entity>
            <a-entity rotation="0 0 240"><a-pyramid width="0.1" depth="0.1" height="0.5" position="0.45 0 0.45" rotation="90 35" color="#ef2d5e"></a-pyramid></a-entity>
            <a-entity rotation="0 0 300"><a-pyramid width="0.1" depth="0.1" height="0.5" position="0.45 0 0.45" rotation="90 35" color="#ef2d5e"></a-pyramid></a-entity>
          </a-torus-knot>
        </a-entity>

        <a-entity position="6 1.25 -4"
          spin-motion="direction: 0 0 1; speed: 4"
          linear-motion="direction: -1.25 0 1; speed: 0.33"
          sinlinear-motion="direction: -1 0 0"
          rotation="0 -55 0">
          <a-torus-knot
            p="5" q="11" radius="0.25" radius-tubular="0.05"
            material="color: #ef2d5e; flatShading: true"
            puppet
            sniper="firstShotDelay: 0.55; frequency: 1.5"
            health="group: foe"
            dynamic-collider>
            <a-pyramid width="0.1" depth="0.1" height="0.5" position="0.45 0 0.45" rotation="90 35 0" color="#ef2d5e"></a-pyramid>
            <a-entity rotation="0 0 60"><a-pyramid width="0.1" depth="0.1" height="0.5" position="0.45 0 0.45" rotation="90 35" color="#ef2d5e"></a-pyramid></a-entity>
            <a-entity rotation="0 0 120"><a-pyramid width="0.1" depth="0.1" height="0.5" position="0.45 0 0.45" rotation="90 35" color="#ef2d5e"></a-pyramid></a-entity>
            <a-entity rotation="0 0 180"><a-pyramid width="0.1" depth="0.1" height="0.5" position="0.45 0 0.45" rotation="90 35" color="#ef2d5e"></a-pyramid></a-entity>
            <a-entity rotation="0 0 240"><a-pyramid width="0.1" depth="0.1" height="0.5" position="0.45 0 0.45" rotation="90 35" color="#ef2d5e"></a-pyramid></a-entity>
            <a-entity rotation="0 0 300"><a-pyramid width="0.1" depth="0.1" height="0.5" position="0.45 0 0.45" rotation="90 35" color="#ef2d5e"></a-pyramid></a-entity>
          </a-torus-knot>
        </a-entity>

        <!-- room -->
        <a-plane height="100" width="100" rotation="-90 0 0"></a-plane>
        <!-- tombs -->
        <a-box width="1" depth="0.2" height="1" color="#f7fafd" position="-5 0.5 -5" rotation="0 0 10">
          <a-cylinder color="#f7fafd"  height="0.2" radius="0.5" position="0 0.5 0" rotation="90 0 0"></a-cylinder>
          <a-text value="JUST" align="center" font="monoid" width="8" position="0 0.25 0.1"></a-text>  
        </a-box>
        <a-box width="1" depth="0.2" height="1" color="#f7fafd" position="-2 0.25 -4.5" rotation="0 -15 -5">
          <a-cylinder color="#f7fafd"  height="0.2" radius="0.5" position="0 0.5 0" rotation="90 0 0"></a-cylinder>
          <a-text value="SHOOT" align="center" font="monoid" width="7" position="0 0.25 0.1"></a-text>  
        </a-box>
        <a-box width="1" depth="0.2" height="2" color="#f7fafd" position="1.25 1 -6.5" rotation="0 10 0">
          <a-text value="13" align="center" font="monoid" width="12" position="0 0.25 0.1"></a-text>  
        </a-box>
        <a-box width="1.2" depth="0.2" height="1.2" color="#f7fafd" position="2.5 0.6 -4" rotation="0 10 0">
          <a-cylinder color="#f7fafd"  height="0.2" radius="0.5" position="0 0.4 0" rotation="90 0 0"></a-cylinder>
          <a-text value="KNUCKLE-\nHEADS!" align="center" font="monoid" width="5" position="0 0.25 0.1"></a-text>  
        </a-box>

        <a-box width="1.5" depth="0.25" height="0.75" position="0 0.375 -1" color="#f7fafd">
          <a-cylinder color="#f7fafd"  height="0.25" radius="0.5" position="0 0.4 0" rotation="90 0 0" health="group: friend; hp: 999" dynamic-collider></a-cylinder>
          <a-text value="GOD\nALL MIGHTY\nEXTERMINATE\nSWIFTLY" align="center" font="monoid" width="3" height="10" position="0 0.4 0.15"></a-text>  
        </a-box>
        <a-box width="1" depth="0.2" height="1" color="#f7fafd" position="-2 0.55 -2.5" rotation="0 0 -5"></a-box>
        <a-box width="1" depth="0.2" height="1" color="#f7fafd" position="4.5 0 -1.25" rotation="0 -35 -10">
          <a-cylinder color="#f7fafd"  height="0.2" radius="0.5" position="0 0.5 0" rotation="90 0 0"></a-cylinder>
        </a-box>
        <a-box width="1" depth="0.2" height="2.5" color="#f7fafd" position="-4.25 0 -1.5" rotation="0 40 15">
          <a-cylinder color="#f7fafd"  height="0.2" radius="0.5" position="0 1.7 0" rotation="90 0 0"></a-cylinder>
        </a-box>

        <!-- crypt -->
        <a-box width="4" depth="5" height="5" color="#f7fafd" position="-8 3.5 -15" rotation="0 10 0">
          <a-box width="5" depth="6" height="0.5" color="#f7fafd" position="0 3.25 0"></a-box>
          <a-box width="4.5" depth="5.5" height="0.5" color="#f7fafd" position="0 2.75 0"></a-box>
          <a-box width="4.5" depth="5.5" height="0.5" color="#f7fafd" position="0 -2.75 0"></a-box>
          <a-box width="5" depth="6" height="0.5" color="#f7fafd" position="0 -3.25 0"></a-box>
          <a-box width="1" depth="0.5" height="4" color="#f7fafd" position="0 5 2.5"></a-box>
          <a-box width="3" depth="0.5" height="1" color="#f7fafd" position="0 5.5 2.5"></a-box>
        </a-box>

        <!-- full moon -->
        <a-circle radius="50" position="200 250 -250" rotation="0 -25 0"></a-circle>

        <!-- walls -->
        <a-box width="50" depth="0.1" height="5" color="#f7fafd" position="0 2.5 -25"></a-box>
        <a-box width="50" depth="0.1" height="5" color="#f7fafd" position="-15 2.5 0" rotation="0 90 0"></a-box>
        <a-box width="50" depth="0.1" height="5" color="#f7fafd" position="15 2.5 0" rotation="0 90 0"></a-box>
        <a-box width="75" depth="0.1" height="5" color="#f7fafd" position="0 2.5 5"></a-box>

      </a-level>

      <a-level id="end">
        <a-text
          value="SUP3RFR1GHT VR"
          align="center"
          color="#ef2d5e"
          font="monoid"
          width="20"
          position="0 2.5 -5"
        ></a-text>
        
        <a-text value="THANK YOU FOR PLAYING!" align="center" color="black" font="monoid" width="8" position="0 1.6 -5"></a-text>
        <a-text value="NO 3D SHAPES WERE HARMED\nIN THE MAKING OF THIS GAME\n(IT'S ALL VIRTUAL ANYWAY)" align="center" color="black" font="monoid" width="8" position="0 0.25 -5.5"></a-text>
      </a-level>
    </script>
  </body>
</html>
